"use strict";!function(){var e=document.body,t=document.querySelector(".page-header__button"),o=document.querySelector(".popup");if(o)var n=o.querySelector(".popup__close"),s=o.querySelector("[name=popup-name]"),a=o.querySelector("[name=popup-tel]"),i=o.querySelector("[name=popup-comment]");var l=document.querySelector(".page-footer__list-button--navi"),r=document.querySelector(".page-footer__navi-list"),c=document.querySelector(".page-footer__list-button--contacts"),d=document.querySelector(".page-footer__contacts-list"),u=document.querySelectorAll(".page-footer__list-button"),v=document.querySelectorAll(".page-footer__navi-heading"),_=document.querySelector(".feedback__form");if(_)var p=_.querySelector("[name=name]"),f=_.querySelector("[name=tel]"),m=_.querySelector("[name=comment]");document.addEventListener("DOMContentLoaded",(function(){var e;if("IntersectionObserver"in window){e=document.querySelectorAll(".lazy");var t=new IntersectionObserver((function(e,o){e.forEach((function(e){if(e.isIntersecting){var o=e.target;o.classList.remove("lazy"),t.unobserve(o)}}))}));e.forEach((function(e){t.observe(e)}))}else{var o;e=document.querySelectorAll(".lazy");var n=function(){o&&clearTimeout(o),o=setTimeout((function(){var t=window.pageYOffset;e.forEach((function(e){e.offsetTop<window.innerHeight+t&&(e.src=e.dataset.src,e.classList.remove("lazy"))})),0===e.length&&(document.removeEventListener("scroll",n),window.removeEventListener("resize",n),window.removeEventListener("orientationChange",n))}),20)};document.addEventListener("scroll",n),window.addEventListener("resize",n),window.addEventListener("orientationChange",n)}})),t&&t.addEventListener("click",(function(e){e.preventDefault(),L()}));var L=function(){o&&(o.classList.remove("popup--closed"),e.style.overflow="hidden",s.focus(),n.addEventListener("click",g),document.addEventListener("keydown",y),document.addEventListener("click",h))},g=function(){s.blur(),o.classList.add("popup--closed"),e.style.removeProperty("overflow"),b(),n.removeEventListener("click",g),document.removeEventListener("keydown",y),document.removeEventListener("click",h)},y=function(e){27===e.keyCode&&(e.preventDefault(),g())},h=function(e){e.target.classList.contains("popup")&&g()},b=function(){s.value="",a.value="",i.value="",s.style.border="none",a.style.border="none"};_&&_.addEventListener("submit",(function(){localStorage.setItem("name",p.value),localStorage.setItem("phone",f.value),localStorage.setItem("question",m.value)})),o&&o.addEventListener("submit",(function(){localStorage.setItem("name",s.value),localStorage.setItem("phone",a.value),localStorage.setItem("question",i.value)})),window.addEventListener("DOMContentLoaded",(function(){function e(e){var t=0,o="+7 (___) ___-__-__".replace(/\D/g,""),n=this.value.replace(/\D/g,"");o.length>=n.length&&(n=o),this.value="+7 (___) ___-__-__".replace(/./g,(function(e){return/[_\d]/.test(e)&&t<n.length?n.charAt(t++):t>=n.length?"":e})),"blur"===e.type?2===this.value.length&&(this.value=""):function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var o=t.createTextRange();o.collapse(!0),o.moveEnd("character",e),o.moveStart("character",e),o.select()}}(this.value.length,this)}if(_){var t=_.querySelector("#tel");t.addEventListener("input",e,!1),t.addEventListener("focus",e,!1),t.addEventListener("blur",e,!1)}if(o){var n=o.querySelector("#popup-tel");n.addEventListener("input",e,!1),n.addEventListener("focus",e,!1),n.addEventListener("blur",e,!1)}})),window.innerWidth<=767&&(r&&r.classList.add("visually-hidden"),d&&d.classList.add("visually-hidden")),window.addEventListener("resize",(function(){window.innerWidth<=767?(r&&(r.classList.add("visually-hidden"),l.classList.add("page-footer__list-button--closed"),l.classList.remove("page-footer__list-button--opened")),d&&(d.classList.add("visually-hidden"),c.classList.add("page-footer__list-button--closed"),c.classList.remove("page-footer__list-button--opened"))):(r&&r.classList.remove("visually-hidden"),d&&d.classList.remove("visually-hidden"))}));var E=function(e){var t=e.target;(t===l||t.classList.contains("page-footer__navi-heading--sections"))&&(l.classList.contains("page-footer__list-button--opened")?(l.classList.remove("page-footer__list-button--opened"),l.classList.add("page-footer__list-button--closed"),r.classList.add("visually-hidden")):(r.classList.remove("visually-hidden"),l.classList.remove("page-footer__list-button--closed"),l.classList.add("page-footer__list-button--opened"),d.classList.add("visually-hidden"),c.classList.remove("page-footer__list-button--opened"),c.classList.add("page-footer__list-button--closed"))),(t===c||t.classList.contains("page-footer__navi-heading--contacts"))&&(c.classList.contains("page-footer__list-button--opened")?(c.classList.remove("page-footer__list-button--opened"),c.classList.add("page-footer__list-button--closed"),d.classList.add("visually-hidden")):(d.classList.remove("visually-hidden"),c.classList.remove("page-footer__list-button--closed"),c.classList.add("page-footer__list-button--opened"),r.classList.add("visually-hidden"),l.classList.remove("page-footer__list-button--opened"),l.classList.add("page-footer__list-button--closed")))};if(u)for(var S=0;S<u.length;S++)u[S].addEventListener("click",E);if(v)for(var w=0;w<v.length;w++)v[w].addEventListener("click",E)}();